{"version":3,"file":"Scripts.cjs","sources":["../../../src/client/Scripts.tsx"],"sourcesContent":["import { useRouter, useRouterState } from '@tanstack/react-router'\nimport { Asset } from './Asset'\nimport type { RouterManagedTag } from '@tanstack/react-router'\n\nexport const Scripts = () => {\n  const router = useRouter()\n\n  const assetScripts = useRouterState({\n    select: (state) => {\n      const assetScripts: Array<RouterManagedTag> = []\n\n      state.matches\n        .map((match) => router.looseRoutesById[match.routeId]!)\n        .forEach((route) =>\n          router.manifest?.routes[route.id]?.assets\n            ?.filter((d) => d.tag === 'script')\n            .forEach((asset) => {\n              assetScripts.push({\n                tag: 'script',\n                attrs: asset.attrs,\n                children: asset.children,\n              } as any)\n            }),\n        )\n\n      return assetScripts\n    },\n  })\n\n  const { scripts } = useRouterState({\n    select: (state) => ({\n      scripts: state.matches\n        .map((match) => match.scripts!)\n        .filter(Boolean)\n        .flat(1)\n        .map(({ children, ...script }) => ({\n          tag: 'script',\n          attrs: {\n            ...script,\n            suppressHydrationWarning: true,\n          },\n          children,\n        })),\n    }),\n  })\n\n  const allScripts = [...scripts, ...assetScripts] as Array<RouterManagedTag>\n\n  return (\n    <>\n      {allScripts.map((asset, i) => (\n        // eslint-disable-next-line @eslint-react/no-array-index-key\n        <Asset {...asset} key={`tsr-scripts-${asset.tag}-${i}`} />\n      ))}\n    </>\n  )\n}\n"],"names":["useRouter","useRouterState","assetScripts","jsx","Fragment","createElement","Asset"],"mappings":";;;;;;AAIO,MAAM,UAAU,MAAM;AAC3B,QAAM,SAASA,YAAAA;AAEf,QAAM,eAAeC,YAAAA,eAAe;AAAA,IAClC,QAAQ,CAAC,UAAU;AACjB,YAAMC,gBAAwC,CAAA;AAExC,YAAA,QACH,IAAI,CAAC,UAAU,OAAO,gBAAgB,MAAM,OAAO,CAAE,EACrD;AAAA,QAAQ,CAAC,UACR;;AAAA,0CAAO,aAAP,mBAAiB,OAAO,MAAM,QAA9B,mBAAmC,WAAnC,mBACI,OAAO,CAAC,MAAM,EAAE,QAAQ,UACzB,QAAQ,CAAC,UAAU;AAClBA,0BAAa,KAAK;AAAA,cAChB,KAAK;AAAA,cACL,OAAO,MAAM;AAAA,cACb,UAAU,MAAM;AAAA,YAAA,CACV;AAAA,UAAA;AAAA;AAAA,MACT;AAGAA,aAAAA;AAAAA,IACT;AAAA,EAAA,CACD;AAEK,QAAA,EAAE,QAAQ,IAAID,2BAAe;AAAA,IACjC,QAAQ,CAAC,WAAW;AAAA,MAClB,SAAS,MAAM,QACZ,IAAI,CAAC,UAAU,MAAM,OAAQ,EAC7B,OAAO,OAAO,EACd,KAAK,CAAC,EACN,IAAI,CAAC,EAAE,UAAU,GAAG,cAAc;AAAA,QACjC,KAAK;AAAA,QACL,OAAO;AAAA,UACL,GAAG;AAAA,UACH,0BAA0B;AAAA,QAC5B;AAAA,QACA;AAAA,MAAA,EACA;AAAA,IAAA;AAAA,EACN,CACD;AAED,QAAM,aAAa,CAAC,GAAG,SAAS,GAAG,YAAY;AAE/C,SAEKE,2BAAAA,IAAAC,WAAAA,UAAA,EAAA,UAAA,WAAW,IAAI,CAAC,OAAO;AAAA;AAAA,IAEtBC,sBAAAA,cAACC,MAAO,OAAA,EAAA,GAAG,OAAO,KAAK,eAAe,MAAM,GAAG,IAAI,CAAC,GAAI,CAAA;AAAA,GACzD,EACH,CAAA;AAEJ;;"}